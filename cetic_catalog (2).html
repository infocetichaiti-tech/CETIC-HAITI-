    <script>
        // Variables globales
        let currentTotal = 0;
        let ordersData = [];
        let clientsData = [];
        let selectedServices = [];
        let cartItems = [];
        let currentServiceModal = null;
        
        const services = {
            'memoire': { 
                name: 'Accompagnement M√©moire/Th√®se', 
                price: 425, 
                category: 'academic',
                details: 'Service complet incluant : d√©finition du sujet, √©laboration de la probl√©matique, construction du cadre th√©orique, m√©thodologie de recherche, analyse des donn√©es, r√©daction compl√®te et mise en forme selon les normes acad√©miques.',
                duration: '2-6 mois',
                deliverables: ['Plan d√©taill√©', 'Cadre th√©orique', 'M√©thodologie', 'Analyse', 'Document final']
            },
            'poster': { 
                name: 'Poster Scientifique', 
                price: 115, 
                category: 'academic',
                details: 'Conception graphique professionnelle d\'un poster scientifique avec r√©daction synth√©tique du contenu, mise en page attractive et respect des standards de pr√©sentation scientifique.',
                duration: '1-2 semaines',
                deliverables: ['Design initial', 'Contenu r√©dig√©', 'Poster final PDF/Print']
            },
            'rapport': { 
                name: 'Rapport Acad√©mique/Professionnel', 
                price: 185, 
                category: 'academic',
                details: 'R√©daction compl√®te de rapports de stage, projets de recherche appliqu√©e ou projets professionnels avec analyse approfondie et recommandations.',
                duration: '2-4 semaines',
                deliverables: ['Structure du rapport', 'R√©daction', 'R√©vision', 'Document final']
            },
            'portfolio': { 
                name: 'Portfolio Acad√©mique/Professionnel', 
                price: 150, 
                category: 'academic',
                details: 'Cr√©ation d\'un portfolio professionnel structur√© pr√©sentant votre parcours, comp√©tences et r√©alisations avec un design moderne et impactant.',
                duration: '1-3 semaines',
                deliverables: ['Analyse du parcours', 'Design portfolio', 'Version num√©rique', 'Guide d\'utilisation']
            },
            'correction': { 
                name: 'Correction & R√©vision', 
                price: 85, 
                category: 'academic',
                details: 'Service de r√©vision linguistique et m√©thodologique : correction orthographique, am√©lioration du style, v√©rification de la coh√©rence et mise aux normes bibliographiques (APA, Vancouver, etc.).',
                duration: '3-7 jours',
                deliverables: ['Document corrig√©', 'Rapport des modifications', 'Conseils d\'am√©lioration']
            },
            'formation': { 
                name: 'Formations & Ateliers', 
                price: 75, 
                category: 'academic',
                details: 'Ateliers pratiques sur les normes de r√©daction acad√©mique (APA, MLA), techniques de r√©daction d\'articles scientifiques, cr√©ation de posters et pr√©paration de soutenances.',
                duration: '2-8 heures',
                deliverables: ['Support de formation', 'Exercices pratiques', 'Certificat de participation']
            },
            'formation-pro': { 
                name: 'Formation Professionnelle', 
                price: 325, 
                category: 'general',
                details: 'Formations compl√®tes en bureautique (Office, Google Workspace), r√©seaux informatiques, maintenance, infographie (Photoshop, Illustrator), comptabilit√© et montage vid√©o.',
                duration: '1-12 semaines',
                deliverables: ['Manuel de formation', 'Exercices pratiques', 'Projets r√©els', 'Certificat']
            },
            'informatique': { 
                name: 'Services Informatiques', 
                price: 115, 
                category: 'general',
                details: 'Services techniques complets : d√©pannage informatique, installation et configuration de logiciels, maintenance pr√©ventive, configuration r√©seau et conseils en cybers√©curit√©.',
                duration: '1-5 jours',
                deliverables: ['Diagnostic', 'R√©parations', 'Installation', 'Documentation']
            },
            'marketing': { 
                name: 'Communication & Marketing', 
                price: 175, 
                category: 'general',
                details: 'Cr√©ation de supports de communication : affiches, flyers, logos, spots radio, strat√©gie de contenu et gestion professionnelle des r√©seaux sociaux.',
                duration: '1-4 semaines',
                deliverables: ['Supports visuels', 'Contenus r√©dig√©s', 'Guide d\'utilisation']
            },
            'evenementiel': { 
                name: '√âv√©nementiel Acad√©mique', 
                price: 500, 
                category: 'general',
                details: 'Organisation compl√®te d\'√©v√©nements acad√©miques : colloques, s√©minaires, conf√©rences, ateliers sp√©cialis√©s avec coordination logistique et technique.',
                duration: '2-8 semaines',
                deliverables: ['Plan d\'organisation', 'Coordination', 'Support technique', 'Rapport final']
            },
            'traduction': { 
                name: 'Traduction & Interpr√©tation', 
                price: 15, 
                category: 'general',
                details: 'Services de traduction professionnelle fran√ßais-anglais-espagnol pour documents acad√©miques et professionnels, avec interpr√©tation simultan√©e ou cons√©cutive.',
                duration: '1-5 jours',
                deliverables: ['Document traduit', 'R√©vision qualit√©', 'Certification si demand√©e']
            },
            'coaching': { 
                name: 'Conseil & Coaching', 
                price: 90, 
                category: 'general',
                details: 'Accompagnement personnalis√© : orientation scolaire et professionnelle, coaching de performance, pr√©paration aux soutenances et entretiens.',
                duration: '2-8 s√©ances',
                deliverables: ['Bilan personnalis√©', 'Plan d\'action', 'Suivi progressif', 'Outils pratiques']
            },
            'formation-spec': { 
                name: 'Formations Sp√©cialis√©es', 
                price: 250, 
                category: 'general',
                details: 'Formations avanc√©es en gestion de projet, leadership, ressources humaines, comptabilit√© avanc√©e et management d\'√©quipe.',
                duration: '2-6 semaines',
                deliverables: ['Modules de formation', 'Cas pratiques', 'Certification', 'R√©seau professionnel']
            },
            'certifications': { 
                name: 'Certifications Courtes', 
                price: 165, 
                category: 'general',
                details: 'Programmes de certification intensive : Excel avanc√©, cybers√©curit√©, gestion des r√©seaux sociaux avec d√©livrance de certificats reconnus.',
                duration: '1-4 semaines',
                deliverables: ['Formation intensive', '√âvaluation pratique', 'Certificat officiel', 'Badge num√©rique']
            }
        };
        
        // Fonction pour changer d'onglet
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            
            // Trouver le bon bouton et l'activer
            buttons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(tabName)) {
                    btn.classList.add('active');
                }
            });
            
            if (tabName === 'commandes') {
                initializeServicesCheckbox();
            } else if (tabName === 'clients') {
                updateClientsTable();
            } else if (tabName === 'rapports') {
                updateReportData();
            } else if (tabName === 'analyse') {
                updateAnalysis();
            }
        }
        
        // Fonctions interactives pour les services
        function selectServiceInteractive(element) {
            const serviceId = element.dataset.service;
            const price = parseInt(element.dataset.price);
            
            // Animation de s√©lection
            element.classList.toggle('selected');
            
            // Basculer vers l'onglet commandes apr√®s animation
            setTimeout(() => {
                showTab('commandes');
                const checkbox = document.getElementById('service_' + serviceId);
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                    toggleServiceSelection(serviceId, price, checkbox.checked);
                }
            }, 300);
        }
        
        function addToCart(serviceId, price) {
            const existingItem = cartItems.find(item => item.id === serviceId);
            
            if (existingItem) {
                showNotification('‚ö†Ô∏è Service d√©j√† dans le panier', 'warning');
                return;
            }
            
            cartItems.push({
                id: serviceId,
                name: services[serviceId].name,
                price: price
            });
            
            updateFloatingCart();
            showNotification(`‚úÖ ${services[serviceId].name} ajout√© au panier`, 'success');
            
            // Animation sur la carte
            const card = document.querySelector(`[data-service="${serviceId}"]`);
            if (card) {
                card.classList.add('selected');
                
                // Ajouter un compteur visuel
                let counter = card.querySelector('.cart-counter');
                if (!counter) {
                    counter = document.createElement('div');
                    counter.className = 'cart-counter';
                    counter.textContent = '‚úì';
                    card.appendChild(counter);
                }
            }
        }
        
        function showServiceDetails(serviceId) {
            const service = services[serviceId];
            currentServiceModal = serviceId;
            
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalAddButton = document.getElementById('modalAddButton');
            
            modalTitle.textContent = service.name;
            
            modalBody.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">üìã Description</h4>
                    <p style="line-height: 1.6;">${service.details}</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">‚è±Ô∏è Dur√©e</h4>
                    <p><strong>${service.duration}</strong></p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">üì¶ Livrables</h4>
                    <ul style="padding-left: 20px;">
                        ${service.deliverables.map(item => `<li style="margin-bottom: 5px;">${item}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="text-align: center; padding: 15px; background: linear-gradient(45deg, #667eea, #764ba2); color: white; border-radius: 10px;">
                    <h3 style="margin: 0;">üí∞ Prix: ${service.price} USD</h3>
                </div>
            `;
            
            const isInCart = cartItems.some(item => item.id === serviceId);
            modalAddButton.innerHTML = isInCart ? '‚úÖ D√©j√† dans le panier' : '‚ûï Ajouter au Panier';
            modalAddButton.disabled = isInCart;
            
            document.getElementById('serviceModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('serviceModal').style.display = 'none';
            currentServiceModal = null;
        }
        
        function addFromModal() {
            if (currentServiceModal) {
                const service = services[currentServiceModal];
                addToCart(currentServiceModal, service.price);
                closeModal();
            }
        }
        
        function updateFloatingCart() {
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const floatingCart = document.getElementById('floatingCart');
            
            const totalItems = cartItems.length;
            const totalAmount = cartItems.reduce((sum, item) => sum + item.price, 0);
            
            cartCount.textContent = totalItems;
            cartTotal.textContent = totalAmount.toLocaleString();
            
            if (totalItems > 0) {
                floatingCart.classList.add('visible');
            } else {
                floatingCart.classList.remove('visible');
            }
        }
        
        function clearCart() {
            if (cartItems.length === 0) {
                showNotification('‚ö†Ô∏è Le panier est d√©j√† vide', 'warning');
                return;
            }
            
            if (confirm('√ätes-vous s√ªr de vouloir vider le panier ?')) {
                cartItems = [];
                selectedServices = [];
                updateFloatingCart();
                updateTotal();
                
                // Remettre √† z√©ro les s√©lections visuelles
                document.querySelectorAll('.service-card.selected').forEach(card => {
                    card.classList.remove('selected');
                    const counter = card.querySelector('.cart-counter');
                    if (counter) counter.remove();
                });
                
                // D√©cocher les cases
                document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.parentElement.classList.remove('selected');
                });
                
                showNotification('üóëÔ∏è Panier vid√© avec succ√®s', 'success');
            }
        }
        
        function sendQuickWhatsApp() {
            if (cartItems.length === 0) {
                showNotification('‚ö†Ô∏è Ajoutez des services au panier avant de commander', 'warning');
                return;
            }
            
            const servicesList = cartItems.map(item => `‚Ä¢ ${item.name}: ${item.price} USD`).join('\n');
            const totalAmount = cartItems.reduce((sum, item) => sum + item.price, 0);
            
            const message = `üõí *DEMANDE DE DEVIS CETIC*\n\n` +
                          `*Services demand√©s:*\n${servicesList}\n\n` +
                          `üí∞ *TOTAL ESTIM√â: ${totalAmount} USD*\n\n` +
                          `Bonjour, je suis int√©ress√©(e) par ces services. Pouvez-vous me faire un devis personnalis√© ?`;
            
            const whatsappUrl = `https://wa.me/50938324809?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        
        // Initialiser les cases √† cocher des services
        function initializeServicesCheckbox() {
            const container = document.getElementById('servicesCheckbox');
            if (!container) return;
            
            container.innerHTML = '';
            
            Object.keys(services).forEach(serviceId => {
                const service = services[serviceId];
                const checkboxItem = document.createElement('div');
                checkboxItem.className = 'checkbox-item';
                
                const isInCart = cartItems.some(item => item.id === serviceId);
                
                checkboxItem.innerHTML = `
                    <input type="checkbox" id="service_${serviceId}" ${isInCart ? 'checked' : ''} onchange="toggleServiceSelection('${serviceId}', ${service.price}, this.checked)">
                    <div>
                        <strong>${service.name}</strong><br>
                        <span style="color: #764ba2; font-weight: bold;">${service.price} USD</span>
                    </div>
                `;
                
                if (isInCart) {
                    checkboxItem.classList.add('selected');
                }
                
                container.appendChild(checkboxItem);
            });
        }
        
        // G√©rer la s√©lection/d√©s√©lection des services
        function toggleServiceSelection(serviceId, price, isChecked) {
            const checkboxItem = document.getElementById('service_' + serviceId).parentElement;
            
            if (isChecked) {
                const existingService = selectedServices.find(s => s.id === serviceId);
                const existingCartItem = cartItems.find(item => item.id === serviceId);
                
                if (!existingService) {
                    selectedServices.push({ id: serviceId, price: price });
                }
                
                if (!existingCartItem) {
                    cartItems.push({
                        id: serviceId,
                        name: services[serviceId].name,
                        price: price
                    });
                }
                
                checkboxItem.classList.add('selected');
            } else {
                selectedServices = selectedServices.filter(s => s.id !== serviceId);
                cartItems = cartItems.filter(item => item.id !== serviceId);
                checkboxItem.classList.remove('selected');
                
                // Retirer la s√©lection visuelle de la carte
                const serviceCard = document.querySelector(`[data-service="${serviceId}"]`);
                if (serviceCard) {
                    serviceCard.classList.remove('selected');
                    const counter = serviceCard.querySelector('.cart-counter');
                    if (counter) counter.remove();
                }
            }
            
            updateTotal();
            updateFloatingCart();
        }
        
        // Mise √† jour du total
        function updateTotal() {
            currentTotal = selectedServices.reduce((sum, service) => sum + service.price, 0);
            const totalElement = document.getElementById('totalAmount');
            if (totalElement) {
                totalElement.textContent = currentTotal.toLocaleString();
            }
        }
        
        // Enregistrer une commande
        function saveOrder() {
            const clientName = document.getElementById('clientName').value;
            const clientLevel = document.getElementById('clientLevel').value;
            const clientContact = document.getElementById('clientContact').value;
            const clientDate = document.getElementById('clientDate').value || new Date().toISOString().split('T')[0];
            
            if (!clientName || !clientContact) {
                showNotification('‚ö†Ô∏è Veuillez remplir au minimum le nom et le contact du client', 'error');
                return;
            }
            
            if (selectedServices.length === 0) {
                showNotification('‚ö†Ô∏è Veuillez s√©lectionner au moins un service', 'error');
                return;
            }
            
            const order = {
                id: Date.now(),
                clientName,
                clientLevel,
                clientContact,
                date: clientDate,
                services: selectedServices.map(s => ({
                    id: s.id,
                    name: services[s.id].name,
                    price: s.price
                })),
                total: currentTotal,
                timestamp: new Date().toLocaleString()
            };
            
            ordersData.push(order);
            updateClientData(order);
            
            showNotification(`‚úÖ Commande enregistr√©e avec succ√®s!\n\nClient: ${clientName}\nTotal: ${currentTotal} USD\nServices: ${selectedServices.length}`, 'success');
            
            // R√©initialiser le formulaire
            document.getElementById('clientName').value = '';
            document.getElementById('clientLevel').value = '';
            document.getElementById('clientContact').value = '';
            document.getElementById('clientDate').value = new Date().toISOString().split('T')[0];
            
            // Vider le panier
            clearCart();
            
            if (confirm('Voulez-vous envoyer les d√©tails de cette commande via WhatsApp?')) {
                sendWhatsAppOrder(order);
            }
        }
        
        // Mettre √† jour les donn√©es client
        function updateClientData(order) {
            const existingClient = clientsData.find(c => c.name === order.clientName);
            
            if (existingClient) {
                existingClient.orders.push(order);
                existingClient.totalAmount += order.total;
                existingClient.lastOrder = order.date;
            } else {
                clientsData.push({
                    name: order.clientName,
                    level: order.clientLevel,
                    contact: order.clientContact,
                    orders: [order],
                    totalAmount: order.total,
                    lastOrder: order.date
                });
            }
        }
        
        // Envoyer commande via WhatsApp
        function sendWhatsAppOrder(order) {
            const servicesList = order.services.map(s => `‚Ä¢ ${s.name}: ${s.price} USD`).join('\n');
            const message = `üõí *NOUVELLE COMMANDE CETIC*\n\n` +
                          `üë§ *Client:* ${order.clientName}\n` +
                          `üéì *Niveau:* ${order.clientLevel}\n` +
                          `üìû *Contact:* ${order.clientContact}\n` +
                          `üìÖ *Date:* ${order.date}\n\n` +
                          `*Services command√©s:*\n${servicesList}\n\n` +
                          `üí∞ *TOTAL: ${order.total} USD*\n\n` +
                          `Merci de confirmer la disponibilit√© et les d√©lais.`;
            
            const whatsappUrl = `https://wa.me/50938324809?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // Syst√®me de notifications am√©lior√©
        function showNotification(message, type = 'success') {
            // Supprimer les anciennes notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            
            const colors = {
                success: '#4CAF50',
                error: '#f44336',
                warning: '#FF9800',
                info: '#2196F3'
            };
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${colors[type] || colors.success};
                color: white;
                border-radius: 10px;
                z-index: 1001;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideInRight 0.3s ease;
                max-width: 400px;
                word-wrap: break-word;
            `;
            
            notification.innerHTML = `${icons[type] || icons.success} ${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Fermer modal avec Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
        
        // Fermer modal en cliquant √† l'ext√©rieur
        document.getElementById('serviceModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // Reste des fonctions (updateClientsTable, etc.) - inchang√©es pour √©viter la duplication        // Variables globales am√©lior√©es
        let currentTotal = 0;
        let ordersData = [];
        let clientsData = [];
        let selectedServices = [];
        let cartItems = []; // Nouveau: panier interactif
        let currentServiceModal = null;
        
        const services = {
            'memoire': { 
                name: 'Accompagnement M√©moire/Th√®se', 
                price: 425, 
                category: 'academic',
                details: 'Service complet incluant : d√©finition du sujet, √©laboration de la probl√©matique, construction du cadre th√©orique, m√©thodologie de recherche, analyse des donn√©es, r√©daction compl√®te et mise en forme selon les normes acad√©miques.',
                duration: '2-6 mois',
                deliverables: ['Plan d√©taill√©', 'Cadre th√©orique', 'M√©thodologie', 'Analyse', 'Document final']
            },
            'poster': { 
                name: 'Poster Scientifique', 
                price: 115, 
                category: 'academic',
                details: 'Conception graphique professionnelle d\'un poster scientifique avec r√©daction synth√©tique du contenu, mise en page attractive et respect des standards de pr√©sentation scientifique.',
                duration: '1-2 semaines',
                deliverables: ['Design initial', 'Contenu r√©dig√©', 'Poster final PDF/Print']
            },
            'rapport': { 
                name: 'Rapport Acad√©mique/Professionnel', 
                price: 185, 
                category: 'academic',
                details: 'R√©daction compl√®te de rapports de stage, projets de recherche appliqu√©e ou projets professionnels avec analyse approfondie et recommandations.',
                duration: '2-4 semaines',
                deliverables: ['Structure du rapport', 'R√©daction', 'R√©vision', 'Document final']
            },
            'portfolio': { 
                name: 'Portfolio Acad√©mique/Professionnel', 
                price: 150, 
                category: 'academic',
                details: 'Cr√©ation d\'un portfolio professionnel structur√© pr√©sentant votre parcours, comp√©tences et r√©alisations avec un design moderne et impactant.',
                duration: '1-3 semaines',
                deliverables: ['Analyse du parcours', 'Design portfolio', 'Version num√©rique', 'Guide d\'utilisation']
            },
            'correction': { 
                name: 'Correction & R√©vision', 
                price: 85, 
                category: 'academic',
                details: 'Service de r√©vision linguistique et m√©thodologique : correction orthographique, am√©lioration du style, v√©rification de la coh√©rence et mise aux normes bibliographiques (APA, Vancouver, etc.).',
                duration: '3-7 jours',
                deliverables: ['Document corrig√©', 'Rapport des modifications', 'Conseils d\'am√©lioration']
            },
            'formation': { 
                name: 'Formations & Ateliers', 
                price: 75, 
                category: 'academic',
                details: 'Ateliers pratiques sur les normes de r√©daction acad√©mique (APA, MLA), techniques de r√©daction d\'articles scientifiques, cr√©ation de posters et pr√©paration de soutenances.',
                duration: '2-8 heures',
                deliverables: ['Support de formation', 'Exercices pratiques', 'Certificat de participation']
            },
            'formation-pro': { 
                name: 'Formation Professionnelle', 
                price: 325, 
                category: 'general',
                details: 'Formations compl√®tes en bureautique (Office, Google Workspace), r√©seaux informatiques, maintenance, infographie (Photoshop, Illustrator), comptabilit√© et montage vid√©o.',
                duration: '1-12 <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìò Catalogue Dynamique des Services - CETIC Ha√Øti</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            color: #666;
        }
        
        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .tab-button {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 16px;
            min-width: 150px;
        }
        
        .tab-button.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .tab-button:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .service-card {
            background: linear-gradient(145deg, #f8f9ff, #e8f0ff);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.2);
        }
        
        .service-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .service-card p {
            color: #666;
            margin-bottom: 10px;
        }
        
        .price {
            font-weight: bold;
            color: #764ba2;
            font-size: 1.2em;
        }
        
        .form-section {
            background: linear-gradient(145deg, #f8f9ff, #e8f0ff);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e1e8ed;
            transition: all 0.3s ease;
        }
        
        .checkbox-item:hover {
            border-color: #667eea;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .checkbox-item.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .total-section {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }
        
        .total-amount {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .button-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .payment-methods {
            background: linear-gradient(145deg, #f8f9ff, #e8f0ff);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
        }
        
        .whatsapp-button {
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .service-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .service-card:hover .service-actions {
            opacity: 1;
        }
        
        .btn-select, .btn-info {
            flex: 1;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-info {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .btn-select:hover, .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .service-card.selected {
            border-left-color: #4CAF50;
            background: linear-gradient(145deg, #e8f5e8, #f0fff0);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }
        
        .service-card.selected .price {
            color: #4CAF50;
        }
        
        .interactive-card {
            position: relative;
            overflow: hidden;
        }
        
        .interactive-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.5s ease;
        }
        
        .interactive-card:hover::before {
            right: 100%;
        }
        
        .cart-counter {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #f44336;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: bounce 0.3s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e8ed;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .modal-close:hover {
            color: #f44336;
        }
        
        .floating-cart {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 999;
            display: none;
        }
        
        .floating-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.5);
        }
        
        .floating-cart.visible {
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(145deg, #f8f9ff, #e8f0ff);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border-top: 5px solid #667eea;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #666;
            font-weight: 600;
        }
        
        .table-responsive {
            overflow-x: auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        .data-table tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab-button {
                margin-bottom: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .service-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìò CETIC HA√èTI - Catalogue Dynamique</h1>
            <p>Centre d'√âducation et de la Technologie de l'Information et de la Communication</p>
            <div style="margin-top: 15px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 10px; font-size: 14px; color: #666;">
                <strong>üéØ Centre d'Excellence en Technologie, Innovation et Communication</strong>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('services')">üìã Services</button>
            <button class="tab-button" onclick="showTab('commandes')">üõí Commandes</button>
            <button class="tab-button" onclick="showTab('clients')">üë• Clients</button>
            <button class="tab-button" onclick="showTab('rapports')">üìä Rapports</button>
            <button class="tab-button" onclick="showTab('analyse')">üìà Analyse TCD</button>
        </div>
        
        <!-- ONGLET SERVICES -->
        <div id="services" class="tab-content active">
            <h2>üìù Services d'Aide √† la R√©daction Acad√©mique et Scientifique</h2>
            <div class="service-grid">
                <div class="service-card interactive-card" data-service="memoire" data-price="425" onclick="selectServiceInteractive(this)">
                    <h3>üìö Accompagnement M√©moire/Th√®se</h3>
                    <p>Sujet, probl√©matique, cadre th√©orique, m√©thodologie, analyse, r√©daction compl√®te</p>
                    <div class="price">250 - 600 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('memoire', 425)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('memoire')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="poster" data-price="115" onclick="selectServiceInteractive(this)">
                    <h3>üé® Poster Scientifique</h3>
                    <p>Conception + r√©daction synth√©tique + mise en page professionnelle</p>
                    <div class="price">80 - 150 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('poster', 115)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('poster')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="rapport" data-price="185" onclick="selectServiceInteractive(this)">
                    <h3>üìã Rapport Acad√©mique/Professionnel</h3>
                    <p>Rapport de stage, recherche appliqu√©e, projet professionnel</p>
                    <div class="price">120 - 250 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('rapport', 185)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('rapport')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="portfolio" data-price="150" onclick="selectServiceInteractive(this)">
                    <h3>üíº Portfolio Acad√©mique/Professionnel</h3>
                    <p>Structuration du parcours + design professionnel + pr√©sentation</p>
                    <div class="price">100 - 200 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('portfolio', 150)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('portfolio')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="correction" data-price="85" onclick="selectServiceInteractive(this)">
                    <h3>‚úèÔ∏è Correction & R√©vision</h3>
                    <p>Orthographe, style, coh√©rence, normes bibliographiques APA/Vancouver</p>
                    <div class="price">50 - 120 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('correction', 85)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('correction')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="formation" data-price="75" onclick="selectServiceInteractive(this)">
                    <h3>üéì Formations & Ateliers</h3>
                    <p>Normes APA, r√©daction d'articles, posters, pr√©paration soutenance</p>
                    <div class="price">50 - 100 USD / atelier</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('formation', 75)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('formation')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
            </div>
            
            <h2>üíº Services G√©n√©raux CETIC</h2>
            <div class="service-grid">
                <div class="service-card interactive-card" data-service="formation-pro" data-price="325" onclick="selectServiceInteractive(this)">
                    <h3>üñ•Ô∏è Formation Professionnelle</h3>
                    <p>Bureautique, R√©seaux, Maintenance, Infographie, Comptabilit√©, Vid√©o</p>
                    <div class="price">50 - 600 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('formation-pro', 325)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('formation-pro')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="informatique" data-price="115" onclick="selectServiceInteractive(this)">
                    <h3>üíª Services Informatiques</h3>
                    <p>D√©pannage, installation logiciels, maintenance, r√©seau, cybers√©curit√©</p>
                    <div class="price">30 - 200 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('informatique', 115)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('informatique')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="marketing" data-price="175" onclick="selectServiceInteractive(this)">
                    <h3>üì¢ Communication & Marketing</h3>
                    <p>Conception affiche/flyer, spot radio, logo, gestion r√©seaux sociaux</p>
                    <div class="price">50 - 300 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('marketing', 175)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('marketing')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="evenementiel" data-price="500" onclick="selectServiceInteractive(this)">
                    <h3>üé™ √âv√©nementiel Acad√©mique</h3>
                    <p>Organisation colloques, s√©minaires, conf√©rences, ateliers sp√©cialis√©s</p>
                    <div class="price">Forfait sur devis</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('evenementiel', 500)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('evenementiel')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="traduction" data-price="15" onclick="selectServiceInteractive(this)">
                    <h3>üåç Traduction & Interpr√©tation</h3>
                    <p>Fran√ßais ‚Üî Anglais ‚Üî Espagnol (acad√©mique & professionnel)</p>
                    <div class="price">10 - 20 USD / page</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('traduction', 15)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('traduction')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="coaching" data-price="90" onclick="selectServiceInteractive(this)">
                    <h3>üí° Conseil & Coaching</h3>
                    <p>Orientation scolaire, coaching professionnel, pr√©paration soutenance</p>
                    <div class="price">30 - 150 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('coaching', 90)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('coaching')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="formation-spec" data-price="250" onclick="selectServiceInteractive(this)">
                    <h3>üéØ Formations Sp√©cialis√©es</h3>
                    <p>Gestion de projet, Leadership, RH, Comptabilit√© avanc√©e</p>
                    <div class="price">100 - 400 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('formation-spec', 250)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('formation-spec')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
                
                <div class="service-card interactive-card" data-service="certifications" data-price="165" onclick="selectServiceInteractive(this)">
                    <h3>üèÜ Certifications Courtes</h3>
                    <p>Excel avanc√©, Cybers√©curit√©, Gestion r√©seaux sociaux (avec certificat)</p>
                    <div class="price">80 - 250 USD</div>
                    <div class="service-actions">
                        <button class="btn-select" onclick="event.stopPropagation(); addToCart('certifications', 165)">‚ûï Ajouter</button>
                        <button class="btn-info" onclick="event.stopPropagation(); showServiceDetails('certifications')">‚ÑπÔ∏è D√©tails</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ONGLET COMMANDES -->
        <div id="commandes" class="tab-content">
            <h2>üõí Nouvelle Commande</h2>
            
            <div class="form-section">
                <h3>üìù Informations Client</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div class="form-group">
                        <label for="clientName">Nom complet *</label>
                        <input type="text" id="clientName" required>
                    </div>
                    <div class="form-group">
                        <label for="clientLevel">Niveau d'√©tude</label>
                        <select id="clientLevel">
                            <option value="">S√©lectionnez...</option>
                            <option value="Licence">Licence</option>
                            <option value="Master">Master</option>
                            <option value="Doctorat">Doctorat</option>
                            <option value="Professionnel">Professionnel</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clientContact">Contact (T√©l./Email) *</label>
                        <input type="text" id="clientContact" required>
                    </div>
                    <div class="form-group">
                        <label for="clientDate">Date de commande</label>
                        <input type="date" id="clientDate">
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>üéØ S√©lection des Services</h3>
                <div class="checkbox-group" id="servicesCheckbox">
                    <!-- Services seront g√©n√©r√©s dynamiquement -->
                </div>
            </div>
            
            <div class="total-section">
                <div class="total-amount">Total: <span id="totalAmount">0</span> USD</div>
                <p>Prix indicatif - Devis personnalis√© sur demande</p>
            </div>
            
            <div class="payment-methods">
                <h3>üí≥ Modes de Paiement</h3>
                <div class="payment-option">
                    <strong>üì± MonCash:</strong> +509 3832 4809
                </div>
                <div class="payment-option">
                    <strong>üí∞ NatCash:</strong> +509 3269 9211 - Emmanuel CHERELUS
                </div>
                <p style="margin-top: 15px; color: #666;">
                    üëâ Envoyez la preuve de paiement (capture d'√©cran) apr√®s transaction
                </p>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="button-primary" onclick="saveOrder()">üíæ Enregistrer la Commande</button>
                <button class="whatsapp-button" onclick="sendQuickWhatsApp()" style="margin-left: 20px;">
                    üì≤ Commander via WhatsApp
                </button>
                <button class="button-primary" onclick="clearCart()" style="margin-left: 20px; background: linear-gradient(45deg, #f44336, #d32f2f);">
                    üóëÔ∏è Vider le Panier
                </button>
            </div>
            
            <!-- Panier flottant -->
            <div class="floating-cart" onclick="showTab('commandes')" id="floatingCart">
                üõí Panier (<span id="cartCount">0</span>) - <span id="cartTotal">0</span> USD
            </div>
            
            <!-- Modal pour les d√©tails des services -->
            <div class="modal" id="serviceModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">D√©tails du Service</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div id="modalBody">
                        <!-- Contenu dynamique -->
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="button-primary" id="modalAddButton" onclick="addFromModal()">
                            ‚ûï Ajouter au Panier
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ONGLET CLIENTS -->
        <div id="clients" class="tab-content">
            <h2>üë• Gestion des Clients</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalClients">0</div>
                    <div class="stat-label">Total Clients</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalOrders">0</div>
                    <div class="stat-label">Commandes Totales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">0</div>
                    <div class="stat-label">CA Total (USD)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="averageOrder">0</div>
                    <div class="stat-label">Panier Moyen (USD)</div>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nom Client</th>
                            <th>Niveau</th>
                            <th>Contact</th>
                            <th>Nb Commandes</th>
                            <th>CA Total</th>
                            <th>Derni√®re Commande</th>
                        </tr>
                    </thead>
                    <tbody id="clientsTableBody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 40px; color: #666;">
                                Aucun client enregistr√© pour le moment
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- ONGLET RAPPORTS -->
        <div id="rapports" class="tab-content">
            <h2>üìä Rapports et Statistiques</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="reportTotalRevenue">0</div>
                    <div class="stat-label">Chiffre d'Affaires (USD)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="reportTotalOrders">0</div>
                    <div class="stat-label">Commandes Trait√©es</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="reportAverageOrder">0</div>
                    <div class="stat-label">Panier Moyen (USD)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="reportTopService">-</div>
                    <div class="stat-label">Service le Plus Demand√©</div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üìà √âvolution du Chiffre d'Affaires</h3>
                <canvas id="revenueChart" width="400" height="200"></canvas>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="button-primary" onclick="exportToCSV()">üì• Exporter les Donn√©es CSV</button>
                <button class="button-primary" onclick="generateReport()" style="margin-left: 20px;">üìã G√©n√©rer Rapport PDF</button>
            </div>
        </div>
        
        <!-- ONGLET ANALYSE TCD -->
        <div id="analyse" class="tab-content">
            <h2>üìà Analyse TCD (Tableaux Crois√©s Dynamiques)</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <div class="chart-container">
                    <h3>üèÜ Top 10 Clients</h3>
                    <canvas id="topClientsChart" width="300" height="200"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>üìä CA par Domaine de Service</h3>
                    <canvas id="servicesDomainChart" width="300" height="200"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üéØ R√©partition Acad√©mique vs G√©n√©ral</h3>
                <canvas id="academicVsGeneralChart" width="400" height="200"></canvas>
            </div>
            
            <div class="form-section">
                <h3>üîç Filtres d'Analyse</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div class="form-group">
                        <label for="filterPeriod">P√©riode</label>
                        <select id="filterPeriod" onchange="updateAnalysis()">
                            <option value="all">Toute la p√©riode</option>
                            <option value="month">Ce mois</option>
                            <option value="quarter">Ce trimestre</option>
                            <option value="year">Cette ann√©e</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filterService">Type de service</label>
                        <select id="filterService" onchange="updateAnalysis()">
                            <option value="all">Tous les services</option>
                            <option value="academic">Acad√©mique uniquement</option>
                            <option value="general">G√©n√©ral uniquement</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filterAmount">Montant minimum</label>
                        <input type="number" id="filterAmount" placeholder="USD" onchange="updateAnalysis()">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Variables globales
        let currentTotal = 0;
        let ordersData = [];
        let clientsData = [];
        let selectedServices = [];
        
        const services = {
            'memoire': { name: 'Accompagnement M√©moire/Th√®se', price: 425, category: 'academic' },
            'poster': { name: 'Poster Scientifique', price: 115, category: 'academic' },
            'rapport': { name: 'Rapport Acad√©mique/Professionnel', price: 185, category: 'academic' },
            'portfolio': { name: 'Portfolio Acad√©mique/Professionnel', price: 150, category: 'academic' },
            'correction': { name: 'Correction & R√©vision', price: 85, category: 'academic' },
            'formation': { name: 'Formations & Ateliers', price: 75, category: 'academic' },
            'formation-pro': { name: 'Formation Professionnelle', price: 325, category: 'general' },
            'informatique': { name: 'Services Informatiques', price: 115, category: 'general' },
            'marketing': { name: 'Communication & Marketing', price: 175, category: 'general' },
            'evenementiel': { name: '√âv√©nementiel Acad√©mique', price: 500, category: 'general' },
            'traduction': { name: 'Traduction & Interpr√©tation', price: 15, category: 'general' },
            'coaching': { name: 'Conseil & Coaching', price: 90, category: 'general' },
            'formation-spec': { name: 'Formations Sp√©cialis√©es', price: 250, category: 'general' },
            'certifications': { name: 'Certifications Courtes', price: 165, category: 'general' }
        };
        
        // Fonction pour changer d'onglet
        function showTab(tabName) {
            // Masquer tous les onglets
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Retirer la classe active de tous les boutons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Afficher l'onglet s√©lectionn√©
            document.getElementById(tabName).classList.add('active');
            
            // Activer le bouton correspondant
            event.target.classList.add('active');
            
            // Mise √† jour sp√©cifique selon l'onglet
            if (tabName === 'commandes') {
                initializeServicesCheckbox();
            } else if (tabName === 'clients') {
                updateClientsTable();
            } else if (tabName === 'rapports') {
                updateReportData();
            } else if (tabName === 'analyse') {
                updateAnalysis();
            }
        }
        
        // S√©lection de service depuis la grille
        function selectService(serviceId, price) {
            // Basculer vers l'onglet commandes
            showTab('commandes');
            document.querySelector('.tab-button[onclick="showTab(\'commandes\')"]').classList.add('active');
            
            // Cocher automatiquement le service s√©lectionn√©
            setTimeout(() => {
                const checkbox = document.getElementById('service_' + serviceId);
                if (checkbox) {
                    checkbox.checked = true;
                    toggleServiceSelection(serviceId, price, true);
                }
            }, 100);
        }
        
        // Initialiser les cases √† cocher des services
        function initializeServicesCheckbox() {
            const container = document.getElementById('servicesCheckbox');
            if (!container) return;
            
            container.innerHTML = '';
            
            Object.keys(services).forEach(serviceId => {
                const service = services[serviceId];
                const checkboxItem = document.createElement('div');
                checkboxItem.className = 'checkbox-item';
                checkboxItem.innerHTML = `
                    <input type="checkbox" id="service_${serviceId}" onchange="toggleServiceSelection('${serviceId}', ${service.price}, this.checked)">
                    <div>
                        <strong>${service.name}</strong><br>
                        <span style="color: #764ba2; font-weight: bold;">${service.price} USD</span>
                    </div>
                `;
                container.appendChild(checkboxItem);
            });
        }
        
        // G√©rer la s√©lection/d√©s√©lection des services
        function toggleServiceSelection(serviceId, price, isChecked) {
            const checkboxItem = document.getElementById('service_' + serviceId).parentElement;
            
            if (isChecked) {
                selectedServices.push({ id: serviceId, price: price });
                checkboxItem.classList.add('selected');
            } else {
                selectedServices = selectedServices.filter(s => s.id !== serviceId);
                checkboxItem.classList.remove('selected');
            }
            
            updateTotal();
        }
        
        // Mise √† jour du total
        function updateTotal() {
            currentTotal = selectedServices.reduce((sum, service) => sum + service.price, 0);
            document.getElementById('totalAmount').textContent = currentTotal.toLocaleString();
        }
        
        // Enregistrer une commande
        function saveOrder() {
            const clientName = document.getElementById('clientName').value;
            const clientLevel = document.getElementById('clientLevel').value;
            const clientContact = document.getElementById('clientContact').value;
            const clientDate = document.getElementById('clientDate').value || new Date().toISOString().split('T')[0];
            
            if (!clientName || !clientContact) {
                alert('‚ö†Ô∏è Veuillez remplir au minimum le nom et le contact du client');
                return;
            }
            
            if (selectedServices.length === 0) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner au moins un service');
                return;
            }
            
            // Cr√©er la commande
            const order = {
                id: Date.now(),
                clientName,
                clientLevel,
                clientContact,
                date: clientDate,
                services: selectedServices.map(s => ({
                    id: s.id,
                    name: services[s.id].name,
                    price: s.price
                })),
                total: currentTotal,
                timestamp: new Date().toLocaleString()
            };
            
            // Ajouter √† la liste des commandes
            ordersData.push(order);
            
            // Mettre √† jour les donn√©es clients
            updateClientData(order);
            
            // Confirmation et r√©initialisation
            alert(`‚úÖ Commande enregistr√©e avec succ√®s!\n\nClient: ${clientName}\nTotal: ${currentTotal} USD\nServices: ${selectedServices.length}`);
            
            // R√©initialiser le formulaire
            document.getElementById('clientName').value = '';
            document.getElementById('clientLevel').value = '';
            document.getElementById('clientContact').value = '';
            document.getElementById('clientDate').value = '';
            
            // D√©cocher tous les services
            selectedServices.forEach(service => {
                const checkbox = document.getElementById('service_' + service.id);
                if (checkbox) {
                    checkbox.checked = false;
                    checkbox.parentElement.classList.remove('selected');
                }
            });
            
            selectedServices = [];
            updateTotal();
            
            // Proposer d'envoyer via WhatsApp
            if (confirm('Voulez-vous envoyer les d√©tails de cette commande via WhatsApp?')) {
                sendWhatsAppOrder(order);
            }
        }
        
        // Mettre √† jour les donn√©es client
        function updateClientData(order) {
            const existingClient = clientsData.find(c => c.name === order.clientName);
            
            if (existingClient) {
                existingClient.orders.push(order);
                existingClient.totalAmount += order.total;
                existingClient.lastOrder = order.date;
            } else {
                clientsData.push({
                    name: order.clientName,
                    level: order.clientLevel,
                    contact: order.clientContact,
                    orders: [order],
                    totalAmount: order.total,
                    lastOrder: order.date
                });
            }
        }
        
        // Envoyer commande via WhatsApp
        function sendWhatsAppOrder(order) {
            const servicesList = order.services.map(s => `‚Ä¢ ${s.name}: ${s.price} USD`).join('\n');
            const message = `üõí *NOUVELLE COMMANDE CETIC*\n\n` +
                          `üë§ *Client:* ${order.clientName}\n` +
                          `üéì *Niveau:* ${order.clientLevel}\n` +
                          `üìû *Contact:* ${order.clientContact}\n` +
                          `üìÖ *Date:* ${order.date}\n\n` +
                          `*Services command√©s:*\n${servicesList}\n\n` +
                          `üí∞ *TOTAL: ${order.total} USD*\n\n` +
                          `Merci de confirmer la disponibilit√© et les d√©lais.`;
            
            const whatsappUrl = `https://wa.me/50938324809?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // Mettre √† jour le tableau des clients
        function updateClientsTable() {
            const tbody = document.getElementById('clientsTableBody');
            
            if (clientsData.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #666;">
                            Aucun client enregistr√© pour le moment
                        </td>
                    </tr>
                `;
            } else {
                tbody.innerHTML = clientsData.map(client => `
                    <tr>
                        <td><strong>${client.name}</strong></td>
                        <td>${client.level || 'Non sp√©cifi√©'}</td>
                        <td>${client.contact}</td>
                        <td>${client.orders.length}</td>
                        <td>${client.totalAmount.toLocaleString()} USD</td>
                        <td>${client.lastOrder}</td>
                    </tr>
                `).join('');
            }
            
            // Mettre √† jour les statistiques
            document.getElementById('totalClients').textContent = clientsData.length;
            document.getElementById('totalOrders').textContent = ordersData.length;
            
            const totalRevenue = clientsData.reduce((sum, client) => sum + client.totalAmount, 0);
            document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
            
            const averageOrder = ordersData.length > 0 ? Math.round(totalRevenue / ordersData.length) : 0;
            document.getElementById('averageOrder').textContent = averageOrder;
        }
        
        // Mettre √† jour les donn√©es de rapport
        function updateReportData() {
            const totalRevenue = clientsData.reduce((sum, client) => sum + client.totalAmount, 0);
            const totalOrders = ordersData.length;
            const averageOrder = totalOrders > 0 ? Math.round(totalRevenue / totalOrders) : 0;
            
            // Trouver le service le plus demand√©
            const serviceCount = {};
            ordersData.forEach(order => {
                order.services.forEach(service => {
                    serviceCount[service.name] = (serviceCount[service.name] || 0) + 1;
                });
            });
            
            const topService = Object.keys(serviceCount).reduce((a, b) => 
                serviceCount[a] > serviceCount[b] ? a : b, 'Aucun');
            
            document.getElementById('reportTotalRevenue').textContent = totalRevenue.toLocaleString();
            document.getElementById('reportTotalOrders').textContent = totalOrders;
            document.getElementById('reportAverageOrder').textContent = averageOrder;
            document.getElementById('reportTopService').textContent = topService;
        }
        
        // Exporter en CSV
        function exportToCSV() {
            if (ordersData.length === 0) {
                alert('‚ö†Ô∏è Aucune donn√©e √† exporter');
                return;
            }
            
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Date,Client,Niveau,Contact,Services,Total\n";
            
            ordersData.forEach(order => {
                const services = order.services.map(s => s.name).join(' | ');
                csvContent += `"${order.date}","${order.clientName}","${order.clientLevel}","${order.clientContact}","${services}","${order.total}"\n`;
            });
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `CETIC_commandes_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('‚úÖ Donn√©es export√©es avec succ√®s!');
        }
        
        // G√©n√©rer rapport PDF (simulation)
        function generateReport() {
            alert('üìã Fonctionnalit√© en d√©veloppement\n\nLe rapport PDF sera bient√¥t disponible avec:\n‚Ä¢ Statistiques d√©taill√©es\n‚Ä¢ Graphiques\n‚Ä¢ Liste compl√®te des commandes\n‚Ä¢ Analyse de performance');
        }
        
        // Mettre √† jour l'analyse TCD
        function updateAnalysis() {
            // Cette fonction sera √©tendue pour les graphiques r√©els
            console.log('Mise √† jour de l\'analyse TCD');
            
            // Simulation de donn√©es pour les graphiques
            if (ordersData.length > 0) {
                updateChartsWithData();
            }
        }
        
        // Mettre √† jour les graphiques avec les vraies donn√©es
        function updateChartsWithData() {
            // Top 10 clients par CA
            const clientsRevenue = clientsData
                .sort((a, b) => b.totalAmount - a.totalAmount)
                .slice(0, 10);
                
            // CA par domaine
            const academicRevenue = ordersData
                .filter(order => order.services.some(s => services[s.id]?.category === 'academic'))
                .reduce((sum, order) => sum + order.total, 0);
                
            const generalRevenue = ordersData
                .filter(order => order.services.some(s => services[s.id]?.category === 'general'))
                .reduce((sum, order) => sum + order.total, 0);
                
            console.log('Donn√©es graphiques mises √† jour');
        }
        
        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // D√©finir la date actuelle
            document.getElementById('clientDate').value = new Date().toISOString().split('T')[0];
            
            // Initialiser l'onglet services par d√©faut
            initializeServicesCheckbox();
            
            // Donn√©es de d√©monstration (√† supprimer en production)
            initializeDemoData();
        });
        
        // Donn√©es de d√©monstration
        function initializeDemoData() {
            // Ajouter quelques commandes de test
            const demoOrders = [
                {
                    id: 1,
                    clientName: "Marie Joseph",
                    clientLevel: "Master",
                    clientContact: "+509 1234 5678",
                    date: "2024-09-15",
                    services: [
                        { id: "memoire", name: "Accompagnement M√©moire/Th√®se", price: 425 }
                    ],
                    total: 425,
                    timestamp: "15/09/2024 14:30"
                },
                {
                    id: 2,
                    clientName: "Jean Baptiste",
                    clientLevel: "Licence",
                    clientContact: "jean.baptiste@email.com",
                    date: "2024-09-10",
                    services: [
                        { id: "poster", name: "Poster Scientifique", price: 115 },
                        { id: "formation", name: "Formations & Ateliers", price: 75 }
                    ],
                    total: 190,
                    timestamp: "10/09/2024 10:15"
                },
                {
                    id: 3,
                    clientName: "Sarah Michel",
                    clientLevel: "Professionnel",
                    clientContact: "+509 8765 4321",
                    date: "2024-09-18",
                    services: [
                        { id: "formation-pro", name: "Formation Professionnelle", price: 325 },
                        { id: "certifications", name: "Certifications Courtes", price: 165 }
                    ],
                    total: 490,
                    timestamp: "18/09/2024 16:45"
                }
            ];
            
            // Ajouter les commandes de d√©mo
            ordersData = demoOrders;
            
            // Mettre √† jour les donn√©es clients
            demoOrders.forEach(order => {
                updateClientData(order);
            });
        }
        
        // Fonction utilitaire pour formater les nombres
        function formatNumber(num) {
            return new Intl.NumberFormat('fr-FR').format(num);
        }
        
        // Fonction pour g√©rer les erreurs
        function handleError(error, context) {
            console.error(`Erreur dans ${context}:`, error);
            alert(`Une erreur s'est produite: ${error.message}`);
        }
        
        // Validation des formulaires
        function validateForm(formData) {
            const required = ['clientName', 'clientContact'];
            for (let field of required) {
                if (!formData[field] || formData[field].trim() === '') {
                    return `Le champ ${field} est requis`;
                }
            }
            return null;
        }
        
        // Sauvegarde automatique (localStorage simulation - en m√©moire uniquement)
        function autoSave() {
            // En production, ceci sauvegarderait vers une base de donn√©es
            console.log('Sauvegarde automatique effectu√©e');
        }
        
        // Syst√®me de notifications
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? '#4CAF50' : '#f44336'};
                color: white;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Animation CSS pour les notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            .loading {
                opacity: 0.6;
                pointer-events: none;
            }
            
            .highlight {
                background: linear-gradient(45deg, #667eea, #764ba2) !important;
                color: white !important;
                transform: scale(1.02);
                transition: all 0.3s ease;
            }
        `;
        document.head.appendChild(style);-events: none;
            }
            
            .highlight {
                background: linear-gradient(45deg, #667eea, #764ba2) !important;
                color: white !important;
                transform: scale(1.02);
                transition: all 0.3s ease;
            }
        `;
        document.head.appendChild(style);
        
        // Recherche et filtrage avanc√©
        function filterServices(searchTerm) {
            const serviceCards = document.querySelectorAll('.service-card');
            serviceCards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm.toLowerCase())) {
                    card.style.display = 'block';
                    if (searchTerm) card.classList.add('highlight');
                } else {
                    card.style.display = 'none';
                    card.classList.remove('highlight');
                }
            });
        }
        
        // Syst√®me d'aide contextuelle
        function showHelp(section) {
            const helpTexts = {
                services: "S√©lectionnez les services en cliquant sur les cartes. Les prix sont indicatifs et peuvent √™tre personnalis√©s selon vos besoins sp√©cifiques.",
                commandes: "Remplissez les informations client, s√©lectionnez les services souhait√©s et enregistrez la commande. Le total se calcule automatiquement.",
                clients: "Consultez la liste de tous vos clients avec leurs statistiques de commandes et leur chiffre d'affaires total.",
                rapports: "Visualisez les performances globales avec des graphiques et exportez les donn√©es pour vos analyses.",
                analyse: "Utilisez les tableaux crois√©s dynamiques pour analyser en d√©tail les tendances de votre activit√©."
            };
            
            alert(`üí° Aide - ${section.charAt(0).toUpperCase() + section.slice(1)}\n\n${helpTexts[section]}`);
        }
        
        // Raccourcis clavier
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        if (document.getElementById('commandes').classList.contains('active')) {
                            saveOrder();
                        }
                        break;
                    case 'e':
                        e.preventDefault();
                        exportToCSV();
                        break;
                    case '1':
                        e.preventDefault();
                        showTab('services');
                        break;
                    case '2':
                        e.preventDefault();
                        showTab('commandes');
                        break;
                    case '3':
                        e.preventDefault();
                        showTab('clients');
                        break;
                    case '4':
                        e.preventDefault();
                        showTab('rapports');
                        break;
                    case '5':
                        e.preventDefault();
                        showTab('analyse');
                        break;
                }
            }
        });
        
        console.log('üöÄ Catalogue Dynamique CETIC initialis√© avec succ√®s!');
    </script>
</body>
</html>